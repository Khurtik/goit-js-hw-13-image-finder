{"version":3,"sources":["webpack:///./js/apiService.js","webpack:///./js/index.js","webpack:///./template/img-items.hbs"],"names":["apiService","page","query","fetchImg","_this","this","requestParams","fetch","proxyUrl","headers","Content-Type","Accept","then","response","json","parseResponsed","incrementPage","hits","catch","error","console","log","searchQuery","string","resetPage","refs","searchForm","document","querySelector","galleryList","loadMoreBtn","insertListItem","items","markup","imgItemTemplate","insertAdjacentHTML","addEventListener","e","preventDefault","input","currentTarget","elements","innerHTML","value","PNotify","defaults","styling","title","text","window","scrollTo","top","behavior","Handlebars","__webpack_require__","module","exports","template","1","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","name","hash","likes","views","comments","downloads","compiler","main","stack1","each","fn","program","inverse","noop","useData"],"mappings":"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","file":"main.a89a2b4f7227afb178cf.js","sourcesContent":["const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\nconst baseUrl = 'https://pixabay.com/api/';\r\nconst API_KEY = '14297998-d1283a06c8d7c6782bc49ad77';\r\n\r\nexport default {\r\n  page: 1,\r\n  query: '',\r\n  fetchImg() {\r\n    const options = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        // authorization: '14297998-d1283a06c8d7c6782bc49ad77',\r\n      },\r\n    };\r\n    const requestParams = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${API_KEY}`;\r\n    return fetch(proxyUrl + baseUrl + requestParams, options)\r\n      .then(response => {\r\n        return response.json();\r\n      })\r\n      .then(parseResponsed => {\r\n        this.incrementPage();\r\n        return parseResponsed.hits;\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  },\r\n  get searchQuery() {\r\n    return this.query;\r\n  },\r\n  set searchQuery(string) {\r\n    this.query = string;\r\n  },\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n","import apiService from './apiService.js';\r\nimport imgItemTemplate from '../template/img-items.hbs';\r\nimport PNotify from '../../node_modules/pnotify/dist/es/PNotify.js';\r\nimport '../../node_modules/pnotify/dist/es/PNotifyStyleMaterial.js';\r\nimport '../css/style.css';\r\nimport '../../node_modules/material-design-icons';\r\n\r\nconst refs = {\r\n  searchForm: document.querySelector('#search-form'),\r\n  galleryList: document.querySelector('.gallery'),\r\n  loadMoreBtn: document.querySelector('button[data-action=\"loadmore\"]'),\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', searchFormSubmitHeandler);\r\nrefs.loadMoreBtn.addEventListener('click', loadMoreBtnHeandler);\r\nrefs.loadMoreBtn.addEventListener('click', () =>\r\n  window.scrollTo({\r\n    top: 0,\r\n    behavior: 'smooth',\r\n  }),\r\n);\r\n\r\nfunction searchFormSubmitHeandler(e) {\r\n  e.preventDefault();\r\n  const form = e.currentTarget;\r\n  const input = form.elements.query;\r\n\r\n  clearListItems();\r\n\r\n  apiService.resetPage();\r\n  apiService.searchQuery = input.value;\r\n\r\n  apiService.fetchImg().then(hits => {\r\n    // const markup = imgItemTemplate(hits);\r\n    // refs.galleryList.insertAdjacentHTML('beforeend', markup);\r\n\r\n    if (!hits) {\r\n      refs.galleryList.innerHTML = '';\r\n    } else if (hits <= 0) {\r\n      PNotify.defaults.styling = 'material';\r\n      PNotify.error({\r\n        title: 'Oh No!',\r\n        text: 'Запрос некорректный.Попробуйте еще раз',\r\n      });\r\n    } else {\r\n      const markup = imgItemTemplate(hits);\r\n      refs.galleryList.insertAdjacentHTML('beforeend', markup);\r\n    }\r\n  });\r\n\r\n  input.value = '';\r\n}\r\n\r\nfunction loadMoreBtnHeandler() {\r\n  apiService.fetchImg().then(insertListItem);\r\n}\r\n\r\nfunction insertListItem(items) {\r\n  const markup = imgItemTemplate(items);\r\n  refs.galleryList.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction clearListItems() {\r\n  refs.galleryList.innerHTML = '';\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\\\" width=\\\"300\\\" height=\\\"200\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n    </div>\\r\\n</div>\\r\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}